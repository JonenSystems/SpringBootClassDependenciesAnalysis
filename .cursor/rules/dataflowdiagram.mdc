---
alwaysApply: false
---
## 1. DFDの基本定義と目的の明記

### DFDの目的
DFD (Data Flow Diagram) は、システムにおけるデータ全体の流れ（flow）を図表で表現すること。システム設計の初期段階（要件定義フェイズ）で作成され、開発内容を視覚的に捉えるために利用する。

### 時系列の無視
DFDは処理のタイミングを示すものではなく、順序も関係ない点に注意する。矢印はデータの流れを表しており、時系列は考慮しない。

---

## 2. 基本要素の定義
DFDは「データフロー（流れ）」「データストア（データベース）」「プロセス（処理）」「外部エンティティ」の4つの要素で構成される。
### 2.1. データフロー（流れ）
- システムにおけるデータの流れそのものを指します。
- DFDにおいては、矢印でデータの流れを表します。
- この矢印はデータの流れを表しているため、処理の順序や時系列とは無関係である点に注意が必要です。
- データフローの名称は、プロセス（処理）の内容を推測するために不可欠であるため、必ず名前を付ける必要があります。

### 2.2. データストア（データベース）
- データが常時または一時的に蓄積される場所（データベースやファイルなど）を指します。
- DFDでは、データを蓄積する場合、上下に線を引いて表現することがあります。
- データストア間を直接データフロー（線）で結ぶことは禁止されており、必ず間にプロセスが入る必要があります（例：「受注管理簿」から「出荷管理簿」を作成する場合、「出荷指示」というプロセスが入る）。

### 2.3. プロセス（処理）
- 人やコンピューターによって実行され、データを受け取って加工する働きをする処理を指します。
- プロセスには必ず「入力（input）」と「出力（output）」が必要です。入力または出力のいずれかがないプロセスは記載できません。これは、すべての業務が「input」→「process」→「output」で構成されているという考え方を示しています。
- 処理は丸で表記し、矢印線で繋ぐと見やすいとされています。

### 2.4. 外部エンティティ
- システムとデータのやり取りを行う外部の要素や主体を指します。
- 一般的には、顧客や他のシステムなどが該当します（例：受発注在庫管理システムの外部エンティティは「顧客」と「物流倉庫」）。
- システム内のデータフローを表現する際は、個々のクラス等をエンティティとして扱うこととします。

---

## 3. DFD作成の必須ルール（構造的制約）

### プロセス（処理）のI/O必須
プロセスには必ず「入力（input）」と「出力（output）」が必要である。入力または出力がないプロセスは記載できない（すべての業務は`input`→`process`→`output`で構成される）。

### データストア間の接続禁止
データストア間は、直接データフロー（線）で結ばない。必ずデータストア間にプロセスが入る。

### 要素の命名
すべての要素に必ず名前を付ける。特にデータフロー（矢印）の名称は、プロセスの内容を推測するために不可欠なため、忘れずにつけること。

### 粒度の意識
粒度を細かくしすぎるとシステム全体を把握しにくくなるため、最初は主要な機能や動きのみを大まかに記述する。レベル（階層）が上がるにつれて詳細な内容にする。

---

## 4. 図の作成方法（Mermaid Flowchart Syntaxの適用）

### 使用構文の指定
DFDはMermaid Flowchart（flowchart TD）構文を用いて作成すること。

### 図の方向設定
上から下への`TD`とする。

### リンク（データフロー）の表現
データフローは、矢印付きのリンク構文 `-->` を使用する。リンクにテキスト（データフロー名）を付与する場合は、`A-- データ名 -->B` 構文を使用する。

### DFD要素への推奨シェイプ

```mermaid
flowchart TD
    datastore[(データストア)]
    process((プロセス))
    entity[外部エンティティ]
    
    datastore --Input--> process
    process --Output--> entity
```
