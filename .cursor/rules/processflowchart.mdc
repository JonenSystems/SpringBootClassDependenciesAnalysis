---
alwaysApply: false
---
## 1. プロセスフローチャートの目的

- 処理手順をMermaidの`flowchart`構文で表現し、抽象化された業務フローを可視化する。
- 分岐と終了条件を明示し、処理の到達性や抜け漏れを素早く確認できるようにする。

---

## 2. 基本ルール

1. **構文ヘッダー**: 常に `flowchart TD` を使用し、上から下へ処理を記述する。
2. **ノード定義**: 各ノードは単独の行で定義し、`ノードID[ラベル]` 形式を用いる。ノード定義と遷移定義を同じ行に書かない。
3. **遷移記述**: 遷移は `ノードA --> ノードB` の形で記述し、分岐条件は `ノードA -- 条件 --> ノードB` を用いる。矢印の前後にスペースを入れる。
4. **終端ノード**: フロー終了は `finish([終了])` 等の終端ノードを明示する。全ての経路が終端ノードに到達するよう遷移を記述する。
5. **開始ノード**: `start([開始])` など開始ノードを定義し、最初の処理に向けて矢印を接続する。
6. **分岐の戻り**: 分岐で「いいえ」「No」などの条件を分岐先として明記し、適切な次処理へ接続する。
7. **改行とインデント**: ノード定義や遷移の前に不要な空白を入れない。インデントは4スペース程度を推奨し、ノードごとに揃える。

---

## 3. 推奨ラベル命名

- 処理内容は動詞で始める（例: `collect[ソースファイル一覧を取得]`）。
- 条件分岐ノードは疑問形で表現する（例: `resolve{親クラス型は存在するか?}`）。
- 終端ノードは `[終了]`、開始ノードは `[開始]` を基本とする。

---

## 4. 記述例

```mermaid
flowchart TD
    start([開始])
    collect[ソースファイル一覧を取得]
    parse[JavaParserでクラス宣言をAST化]
    resolve{親クラス型は存在するか?}
    map[親クラスの完全修飾名を解決]
    persist[依存関係レコードを保存]
    summarize[登録件数を集計]
    finish([終了])

    start --> collect --> parse --> resolve
    resolve -- はい --> map --> persist --> summarize --> finish
    resolve -- いいえ --> summarize
    summarize --> finish
```

- ノードを定義してから遷移を列挙することで解析エラーを防止する。
- すべての経路が `finish` に到達していることを確認する。

---
